{"version":3,"sources":["webpack://fryan.goauth/./src/lib/index.ts","webpack://fryan.goauth/webpack/bootstrap","webpack://fryan.goauth/webpack/runtime/define property getters","webpack://fryan.goauth/webpack/runtime/hasOwnProperty shorthand","webpack://fryan.goauth/webpack/runtime/make namespace object","webpack://fryan.goauth/./src/main.js"],"names":["require"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,MAAM,WAAW;IAwBf,YAAa,MAAe;QAF5B,SAAI,GAAQ,SAAS;QAiBrB,QAAQ;QACR,SAAI,GAAG,CAAC,EAAY,EAAE,EAAE;YACtB,WAAW,CAAC,YAAY,CAAC,CAAC,OAAO,GAAG,EAAE;YACtC,OAAO,IAAI;QACb,CAAC;QAED,UAAK,GAAG,CAAC,EAAY,EAAE,EAAE;YACvB,WAAW,CAAC,YAAY,CAAC,CAAC,KAAK,GAAG,EAAE;YACpC,OAAO,IAAI;QACb,CAAC;QAED,qBAAgB,GAAG,CAAC,EAAY,EAAE,EAAE;YAClC,WAAW,CAAC,YAAY,CAAC,CAAC,gBAAgB,GAAG,EAAE;YAC/C,OAAO,IAAI;QACb,CAAC;QAED,2BAAsB,GAAG,CAAC,EAAY,EAAE,EAAE;YACxC,WAAW,CAAC,YAAY,CAAC,CAAC,sBAAsB,GAAG,EAAE;YACrD,OAAO,IAAI;QACb,CAAC;QAED,kBAAa,GAAG,CAAC,EAAY,EAAE,EAAE;YAC/B,WAAW,CAAC,YAAY,CAAC,CAAC,aAAa,GAAG,EAAE;YAC5C,OAAO,IAAI;QACb,CAAC;QAED,mBAAc,GAAG,CAAC,EAAY,EAAE,EAAE;YAChC,WAAW,CAAC,YAAY,CAAC,CAAC,cAAc,GAAG,EAAE;YAC7C,OAAO,IAAI;QACb,CAAC;QAED,qBAAgB,GAAG,CAAC,EAAY,EAAE,EAAE;YAClC,WAAW,CAAC,YAAY,CAAC,CAAC,gBAAgB,GAAG,EAAE;YAC/C,OAAO,IAAI;QACb,CAAC;QAED,UAAU;QACV,SAAI,GAAG,CAAC;YACN,MAAM,KAAK,GAAG,IAAI;YAElB,OAAO;gBACL,IAAI,UAAU;oBACZ,MAAM,EAAE,IAAI,EAAE,GAAG,KAAK;oBACtB,IAAI,MAAM,GAAG,KAAK;oBAClB,IAAI;wBACF,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE;qBACvD;oBAAC,OAAO,GAAG,EAAE;wBACZ,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,EAAC,sBAAsB;qBAClE;oBACD,OAAO,MAAM;gBACf,CAAC;gBACD,MAAM;oBACJ,MAAM,EAAE,IAAI,EAAE,GAAG,KAAK;oBAEtB,IAAI,IAAI,CAAC,UAAU,EAAE;wBACnB,OAAO,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC;qBAC3C;oBACD,IAAI;wBACF,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE;wBAC/C,OAAO,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;qBAC1B;oBAAC,OAAO,GAAG,EAAE;wBACZ,8CAA8C;wBAC9C,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;qBAC3B;gBACH,CAAC;gBACD,OAAO;oBACL,MAAM,EAAE,IAAI,EAAE,GAAG,KAAK;oBAEtB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;wBACpB,OAAO,OAAO,CAAC,MAAM,CAAC,oBAAoB,CAAC;qBAC5C;oBACD,IAAI;wBACF,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,OAAO,EAAE;wBAChD,OAAO,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;qBAC1B;oBAAC,OAAO,GAAG,EAAE;wBACZ,+CAA+C;wBAC/C,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;qBAC3B;gBACH,CAAC;gBACD,IAAI,cAAc;oBAChB,MAAM,EAAE,IAAI,EAAE,GAAG,KAAK;oBAEtB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;wBACpB,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;qBAC7B;oBACD,IAAI;wBACF,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;6BACzC,WAAW,CAAC,GAAG,EAAE,CAAC,eAAe,EAAE;wBACtC,OAAO,OAAO,CAAC,OAAO,CAAC;4BACrB,EAAE,EAAE,OAAO,CAAC,KAAK,EAAE;4BACnB,IAAI,EAAE,OAAO,CAAC,OAAO,EAAE;4BACvB,QAAQ,EAAE,OAAO,CAAC,YAAY,EAAE;4BAChC,UAAU,EAAE,OAAO,CAAC,aAAa,EAAE;4BACnC,KAAK,EAAE,OAAO,CAAC,WAAW,EAAE;4BAC5B,KAAK,EAAE,OAAO,CAAC,QAAQ,EAAE;yBAC1B,CAAC;qBACH;oBAAC,OAAO,GAAG,EAAE;wBACZ,OAAO,OAAO,CAAC,MAAM,CAAC,gDAAgD,CAAC;qBACxE;gBACH,CAAC;aACF;QACH,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QAEf,OAAO;QACP,4BAAQ;YACN,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,MAAM,EAAE,EAAE;gBAC3C,MAAM,KAAK,GAAG,IAAI;gBAElB,MAAM,OAAO,GAAY,MAAM,CAAC;;wBAC9B,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,KAAK,QAAQ,EAAE;4BACzC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,SAAS,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;4BACjG,OAAO,KAAK;yBACb;wBACD,OAAO,IAAI;oBACb,CAAC;iBAAA,EAAE,CAAC;gBACJ,IAAI,CAAC,OAAO,EAAE;oBAAE,MAAM,CAAC,WAAW,CAAC;iBAAE;gBAErC,MAAM,QAAQ,GAAY,MAAM,CAC9B,CAAC,GAAW,EAAE,EAAE,CAAC,IAAI,OAAO,CAAC,CAAC,eAAe,EAAE,cAAc,EAAE,EAAE;oBAC/D,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;oBAC/C,MAAM,CAAC,IAAI,GAAG,iBAAiB;oBAC/B,IAAI;wBACF,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC;4BACzB,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,EAAE;gCAC7B,eAAe,CAAC,IAAI,CAAC;6BACtB;iCAAM;gCACL,cAAc,CAAC,KAAK,CAAC;6BACtB;wBACH,CAAC;wBACD,MAAM,CAAC,OAAO,GAAG,GAAG,EAAE,GAAG,cAAc,CAAC,KAAK,CAAC,EAAC,CAAC;wBAChD,MAAM,CAAC,GAAG,GAAG,GAAG;wBAChB,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC;qBAC7D;oBAAC,OAAO,GAAQ,EAAE;wBACjB,cAAc,CAAC,KAAK,CAAC;qBACtB;gBACH,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;qBACxB,IAAI,CAAC,GAAG,EAAE;oBACT,WAAW,CAAC,YAAY,CAAC,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC;oBACvD,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI;oBACvB,OAAO,IAAI;gBACb,CAAC,CAAC;qBACD,KAAK,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC;gBACrB,IAAI,CAAC,QAAQ,EAAE;oBAAE,MAAM,CAAC,oBAAoB,CAAC;iBAAE;gBAE/C,MAAM,cAAc,GAAQ,MAAM,CAAC;;wBACjC,MAAM,EAAE,IAAI,EAAE,GAAG,KAAK;wBACtB,MAAM,IAAI,GAAG,MAAM,IAAI,OAAO,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,EAAE;4BACnD,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE;gCACvB,IACE,IAAI;uCACD,IAAI,CAAC,MAAM,EACd;oCACA,QAAQ,CAAC,IAAI,CAAC;iCACf;qCAAM;oCACL,OAAO,CAAC,KAAK,CAAC;iCACf;4BACH,CAAC,CAAC;wBACJ,CAAC,CAAC;6BACC,IAAI,CAAC,GAAG,EAAE;4BACT,WAAW,CAAC,YAAY,CAAC,CAAC,sBAAsB,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;4BACnE,OAAO,IAAI;wBACb,CAAC,CAAC;6BACD,KAAK,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC;wBACrB,OAAO,IAAI;oBACb,CAAC;iBAAA,EAAE,CAAC;gBACJ,IAAI,CAAC,cAAc,EAAE;oBAAE,MAAM,CAAC,sCAAsC,CAAC;iBAAE;gBAEvE,MAAM,UAAU,GAAQ,MAAM,CAC5B,GAAS,EAAE;oBACT,MAAM,IAAI,GAAG,MAAM,IAAI,OAAO,CAAC,CAAC,aAAa,EAAE,YAAY,EAAE,EAAE;wBAC7D,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM;wBAChC,MAAM,aAAa,GAAG,WAAW,CAAC,gBAAgB,CAAC;wBAEnD,OAAO,CAAC,IAAI,CAAC;4BACX,MAAM,EAAE,aAAa,CAAC,MAAM;4BAC5B,QAAQ,EAAE,aAAa,CAAC,QAAQ;4BAChC,KAAK,EAAE,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;4BACrC,aAAa,EAAE,aAAa,CAAC,aAAa;yBAC3C,CAAC;6BACC,IAAI,CAAC,GAAG,EAAE;4BACT,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,IAAI;4BAE5B,MAAM,cAAc,GAAG,UAAU,UAAmB;gCAClD,IAAI,UAAU,EAAE;oCACd,SAAS;oCACT,MAAM,OAAO,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE;oCACzD,MAAM,UAAU,GAAG,OAAO,CAAC,eAAe,EAAE;oCAC5C,MAAM,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE;oCACnC,MAAM,IAAI,GAAG,UAAU,CAAC,KAAK,EAAE;oCAC/B,WAAW,CAAC,YAAY,CAAC,CAAC,aAAa,CAAC;wCACtC,IAAI,EAAE,KAAK;qCACZ,CAAC;iCACH;qCAAM;oCACL,UAAU;oCACV,WAAW,CAAC,YAAY,CAAC,CAAC,cAAc,EAAE;iCAC3C;gCACD,WAAW,CAAC,YAAY,CAAC,CAAC,gBAAgB,CAAC,UAAU,CAAC;4BACxD,CAAC;4BAED,gBAAgB;4BAChB,KAAK,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC,MAAM,CACvC,CAAC,UAAmB,EAAE,EAAE;gCACtB,cAAc,CAAC,UAAU,CAAC;4BAC5B,CAAC,CACF;4BAED,OAAO,CAAC,OAAO,CACb,KAAK,CAAC,eAAe,EAAE,CACxB,CAAC,IAAI,CAAC,GAAG,EAAE;gCACV,MAAM,YAAY,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE;gCAC7D,cAAc,CAAC,YAAY,CAAC;gCAC5B,IAAI,CAAC,YAAY,EAAE;oCACjB,KAAK,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE;iCACjC;gCACD,aAAa,CAAC,IAAI,CAAC;4BACrB,CAAC,CAAC;wBACJ,CAAC,CAAC;6BACD,KAAK,CAAC,CAAC,GAAS,EAAE,EAAE;4BACnB,YAAY,CAAC,kDAAkD,CAAC;wBAClE,CAAC,CAAC;oBACN,CAAC,CAAC;oBACF,OAAO,IAAI;gBACb,CAAC,EACF,EAAE;gBACH,IAAI,CAAC,UAAU,EAAE;oBAAE,MAAM,CAAC,qCAAqC,CAAC;iBAAE;gBAClE,OAAO,CAAC,IAAI,CAAC;YACf,CAAC,EAAC;QACJ,CAAC;QAjPC,WAAW,CAAC,OAAO,CAAC,GAAG,GAAG,MAAM,CAAC,QAAQ,EAAE;QAC3C,WAAW,CAAC,gBAAgB,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM;QAChE,WAAW,CAAC,gBAAgB,CAAC,CAAC,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,QAAQ;QACpE,WAAW,CAAC,gBAAgB,CAAC,CAAC,aAAa,GAAG,MAAM,CAAC,WAAW,CAAC,aAAa;QAC9E,WAAW,CAAC,gBAAgB,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM;QAChE,2BAAI,yBAAM,MAAV,IAAI,CAAQ;aACT,IAAI,CAAC,GAAG,EAAE;YACT,WAAW,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE;QACrC,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACb,WAAW,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC;QACtC,CAAC,CAAC;IACN,CAAC;;;AAhCM,yBAAY,GAAG;IACpB,gBAAgB,EAAE,CAAC,IAAa,EAAE,EAAE,GAAE,CAAC;IACvC,sBAAsB,EAAE,CAAC,UAAmB,EAAE,EAAE,GAAE,CAAC;IACnD,aAAa,EAAE,CAAC,GAAoC,EAAE,EAAE,GAAE,CAAC;IAC3D,cAAc,EAAE,GAAG,EAAE,GAAE,CAAC;IACxB,gBAAgB,EAAE,CAAC,QAAiB,EAAE,EAAE,GAAE,CAAC;IAC3C,OAAO,EAAE,GAAG,EAAE,GAAE,CAAC;IACjB,KAAK,EAAE,CAAC,GAAW,EAAE,EAAE,GAAE,CAAC;CAC3B;AAEM,6BAAgB,GAAkB;IACvC,MAAM,EAAE,EAAE;IACV,QAAQ,EAAE,EAAE;IACZ,aAAa,EAAE,EAAE;IACjB,MAAM,EAAE,EAAE;CACX;AAyPH,mCAAmC;AACnC,iEAAe,WAAW;;;;;;;UCvS1B;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;ACNAA,mBAAO,CAAC,GAAD,CAAP,C","file":"fryan.goauth.js","sourcesContent":["declare global {\n  // eslint-disable-next-line\n  interface Window {\n    gapi: any\n  }\n}\n\ninterface FryanGoAuthInterface {\n\n}\n\ninterface configOauthI {\n  apiKey: String,\n  clientID: String,\n  discoveryDocs: Array<String>\n  scopes: Array<String>\n}\n\ninterface configI {\n  gapiPath: String,\n  oAuthConfig: configOauthI,\n  lifeCycle: {\n  }\n}\n\nclass FryanGoauth implements FryanGoAuthInterface {\n  static '#GAPI': string\n\n  static '#AUTH_OPTIONS': configOauthI\n\n  static '#LIFECYCLE' = {\n    afterGapiMounted: (gapi?: object) => {},\n    afterGapiClientMounted: (gapiClient?: object) => {},\n    oAuthSignedIn: (opt: { guid: string, gmail: string }) => {},\n    oAuthSignedOut: () => {},\n    afterOAuthSigned: (signedIn: boolean) => {},\n    success: () => {},\n    error: (err: string) => {}\n  }\n\n  static '#GOAUTH_CONFIG' : configOauthI = {\n    apiKey: ``,\n    clientID: ``,\n    discoveryDocs: [],\n    scopes: []\n  }\n\n  gapi: any = undefined\n\n  constructor (config: configI) {\n    FryanGoauth['#GAPI'] = `${config.gapiPath}`\n    FryanGoauth['#GOAUTH_CONFIG'].apiKey = config.oAuthConfig.apiKey\n    FryanGoauth['#GOAUTH_CONFIG'].clientID = config.oAuthConfig.clientID\n    FryanGoauth['#GOAUTH_CONFIG'].discoveryDocs = config.oAuthConfig.discoveryDocs\n    FryanGoauth['#GOAUTH_CONFIG'].scopes = config.oAuthConfig.scopes\n    this.#init()\n      .then(() => {\n        FryanGoauth['#LIFECYCLE'].success()\n      })\n      .catch((err) => {\n        FryanGoauth['#LIFECYCLE'].error(err)\n      })\n  }\n\n  // HOOKS\n  then = (fn: () => {}) => {\n    FryanGoauth['#LIFECYCLE'].success = fn\n    return this\n  }\n\n  catch = (fn: () => {}) => {\n    FryanGoauth['#LIFECYCLE'].error = fn\n    return this\n  }\n\n  afterGapiMounted = (fn: () => {}) => {\n    FryanGoauth['#LIFECYCLE'].afterGapiMounted = fn\n    return this\n  }\n\n  afterGapiClientMounted = (fn: () => {}) => {\n    FryanGoauth['#LIFECYCLE'].afterGapiClientMounted = fn\n    return this\n  }\n\n  oAuthSignedIn = (fn: () => {}) => {\n    FryanGoauth['#LIFECYCLE'].oAuthSignedIn = fn\n    return this\n  }\n\n  oAuthSignedOut = (fn: () => {}) => {\n    FryanGoauth['#LIFECYCLE'].oAuthSignedOut = fn\n    return this\n  }\n\n  afterOAuthSigned = (fn: () => {}) => {\n    FryanGoauth['#LIFECYCLE'].afterOAuthSigned = fn\n    return this\n  }\n\n  // methods\n  auth = (function () {\n    const _this = this\n\n    return {\n      get isSignedIn () {\n        const { gapi } = _this\n        let signed = false\n        try {\n          signed = gapi.auth2.getAuthInstance().isSignedIn.get()\n        } catch (ers) {\n          console.log('[isSignedIn] - Unready init') // eslint-disable-line\n        }\n        return signed\n      },\n      signin () : Promise<any> {\n        const { gapi } = _this\n\n        if (this.isSignedIn) {\n          return Promise.reject('Already signed in')\n        }\n        try {\n          const r = gapi.auth2.getAuthInstance().signIn()\n          return Promise.resolve(r)\n        } catch (ers) {\n          // console.log('[signin] - Unready init', ers)\n          return Promise.reject(ers)\n        }\n      },\n      signout () : Promise<any> {\n        const { gapi } = _this\n\n        if (!this.isSignedIn) {\n          return Promise.reject('Already signed out')\n        }\n        try {\n          const r = gapi.auth2.getAuthInstance().signOut()\n          return Promise.resolve(r)\n        } catch (ers) {\n          // console.log('[signOut] - Unready init', ers)\n          return Promise.reject(ers)\n        }\n      },\n      get getUserProfile () : Promise<any> {\n        const { gapi } = _this\n\n        if (!this.isSignedIn) {\n          return Promise.reject(false)\n        }\n        try {\n          const profile = gapi.auth2.getAuthInstance()\n            .currentUser.get().getBasicProfile()\n          return Promise.resolve({\n            id: profile.getId(),\n            name: profile.getName(),\n            giveName: profile.getGivenName(),\n            familyName: profile.getFamilyName(),\n            image: profile.getImageUrl(),\n            email: profile.getEmail()\n          })\n        } catch (ers) {\n          return Promise.reject('[getUserProfile] - Error when get user profile')\n        }\n      }\n    }\n  }).bind(this)()\n\n  // init\n  #init = function () {\n    return new Promise(async (resolve, reject) => {\n      const _this = this\n\n      const isHttps: boolean = await (async function () {\n        if (window.location.protocol !== 'https:') {\n          window.location.href = `https:${window.location.href.substring(window.location.protocol.length)}`\n          return false\n        }\n        return true\n      }())\n      if (!isHttps) { reject('Not https') }\n\n      const loadGapi: boolean = await (\n        (url: string) => new Promise((loadGapiResolve, loadGapiReject) => {\n          const script = document.createElement('script')\n          script.type = 'text/javascript'\n          try {\n            script.onload = function (e) {\n              if (window.gapi !== undefined) {\n                loadGapiResolve(true)\n              } else {\n                loadGapiReject(false)\n              }\n            }\n            script.onerror = () => { loadGapiReject(false) }\n            script.src = url\n            document.getElementsByTagName('head')[0].appendChild(script)\n          } catch (ers: any) {\n            loadGapiReject(false)\n          }\n        }))(FryanGoauth['#GAPI'])\n        .then(() => {\n          FryanGoauth['#LIFECYCLE'].afterGapiMounted(window.gapi)\n          this.gapi = window.gapi\n          return true\n        })\n        .catch(() => false)\n      if (!loadGapi) { reject('Gapi is not loaded') }\n\n      const loadGapiClient: any = await (async function () {\n        const { gapi } = _this\n        const task = await new Promise((sResolve, sReject) => {\n          gapi.load('client', () => {\n            if (\n              gapi\n              && gapi.client\n            ) {\n              sResolve(true)\n            } else {\n              sReject(false)\n            }\n          })\n        })\n          .then(() => {\n            FryanGoauth['#LIFECYCLE'].afterGapiClientMounted(_this.gapi.client)\n            return true\n          })\n          .catch(() => false)\n        return task\n      }())\n      if (!loadGapiClient) { reject('Error when loading client from gapi ') }\n\n      const loadGoAuth: any = await (\n        async () => {\n          const task = await new Promise((goAuthResolve, goAuthReject) => {\n            const gClient = this.gapi.client\n            const GOAUTH_CONFIG = FryanGoauth['#GOAUTH_CONFIG']\n\n            gClient.init({\n              apiKey: GOAUTH_CONFIG.apiKey,\n              clientId: GOAUTH_CONFIG.clientID,\n              scope: GOAUTH_CONFIG.scopes.join(' '),\n              discoveryDocs: GOAUTH_CONFIG.discoveryDocs\n            })\n              .then(() => {\n                const { auth2 } = _this.gapi\n\n                const checkSignInOut = function (isSignedIn: boolean) {\n                  if (isSignedIn) {\n                    // signin\n                    const profile = auth2.getAuthInstance().currentUser.get()\n                    const getProfile = profile.getBasicProfile()\n                    const gmail = getProfile.getEmail()\n                    const guid = getProfile.getId()\n                    FryanGoauth['#LIFECYCLE'].oAuthSignedIn({\n                      guid, gmail\n                    })\n                  } else {\n                    // signout\n                    FryanGoauth['#LIFECYCLE'].oAuthSignedOut()\n                  }\n                  FryanGoauth['#LIFECYCLE'].afterOAuthSigned(isSignedIn)\n                }\n\n                // listen Signin\n                auth2.getAuthInstance().isSignedIn.listen(\n                  (isSignedIn: boolean) => {\n                    checkSignInOut(isSignedIn)\n                  }\n                )\n\n                Promise.resolve(\n                  auth2.getAuthInstance()\n                ).then(() => {\n                  const signInStatus = auth2.getAuthInstance().isSignedIn.get()\n                  checkSignInOut(signInStatus)\n                  if (!signInStatus) {\n                    auth2.getAuthInstance().signIn()\n                  }\n                  goAuthResolve(true)\n                })\n              })\n              .catch((ers : any) => {\n                goAuthReject(`An error occurred when loading gapi.client.oAuth`)\n              })\n          })\n          return task\n        }\n      )()\n      if (!loadGoAuth) { reject('Error when loading gapi.client.auth') }\n      resolve(true)\n    })\n  }\n}\n\n// window.FryanGoauth = FryanGoauth\nexport default FryanGoauth\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","require('/@/lib')\n"],"sourceRoot":""}